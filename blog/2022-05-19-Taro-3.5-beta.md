---
title: Taro v3.5 beta ç¼–è¯‘æé€Ÿï¼Œæ”¯æŒ Webpack5ã€React 18...
authors: [zhiqingchen, SyMind, Flame, JJ, TJ]
tags: [v3]
description: 'Taro v3.5 beta ç‰ˆæœ¬å‘å¸ƒ ğŸš€'
---

ç¼–è¯‘é€Ÿåº¦ä¸€ç›´æ˜¯å›°æ‰°å¼€å‘è€…çš„å¤´ç­‰é—®é¢˜ï¼Œç°é˜¶æ®µå¤§å‹ Taro é¡¹ç›®å³ä½¿åœ¨å¢åŠ äº† `cache-loader`ã€`thread-loader` ç­‰ä¼˜åŒ–æ‰‹æ®µåï¼Œç¼–è¯‘è€—æ—¶ä»é«˜å±…ä¸ä¸‹ã€‚å› æ­¤åœ¨ v3.5 ç‰ˆæœ¬ä¸­ Taro é‡ç‚¹å¯¹ç¼–è¯‘ç³»ç»Ÿè¿›è¡Œäº†é‡æ„ï¼Œå¼•å…¥å¯¹ Webpack5 çš„æ”¯æŒï¼Œæ”¹å–„å°ç¨‹åº & H5 ç¼–è¯‘æ—¶çš„æ€§èƒ½ä¸ä½“éªŒã€‚ï¼ˆé™¤æ­¤ä¹‹å¤–ï¼ŒTaro ä¹Ÿæ­£åœ¨è½åœ°å¯¹äº Vite çš„æ”¯æŒï¼Œå±Šæ—¶å¼€å‘è€…å°†å¯ä»¥è‡ªç”±åœ°é€‰æ‹©ç¼–è¯‘å·¥å…·ã€‚ï¼‰

åŒæ—¶ï¼ŒTaro v3.5 è¿˜å¸¦æ¥äº†å…¼å®¹ React 18ã€H5 MPA ç­‰æ–°ç‰¹æ€§ï¼Œæ¬¢è¿å„ä½åŒå­¦å‡çº§è¯•ç”¨~

## ä¸€ã€ç¼–è¯‘æé€Ÿ

ä¸ºäº†æ”¹å–„ç¼–è¯‘æ€§èƒ½ï¼ŒTaro ä¸»è¦åšäº†ä»¥ä¸‹äº‹æƒ…ï¼š

- æ”¯æŒ Webpack5
- åŸºäºæ¨¡å—è”é‚¦çš„ä¾èµ–é¢„ç¼–è¯‘
- æ”¯æŒä½¿ç”¨ `esbuild` å‹ç¼© JSï¼Œä½¿ç”¨ `esbuild` æˆ– `@parcel/css` å‹ç¼© CSS
- ä½¿ç”¨ `@swc/register` ä»£æ›¿ `@babel/register`

æ¥ä¸‹æ¥å°†ç®€å•èŠèŠ Webpack5 ä¸ä¾èµ–é¢„ç¼–è¯‘ï¼Œå…³äºç¼–è¯‘æé€Ÿçš„å®Œæ•´å®ç°ç»†èŠ‚è¯·å‚é˜… [RFC æ–‡æ¡£](https://github.com/NervJS/taro/discussions/11533)ã€‚

### 1. Webpack5

Webpack5 å‘å¸ƒå·²æœ‰ä¸¤å¹´æ—¶é—´ï¼ŒåŠŸèƒ½è¶³å¤Ÿç¨³å®šï¼ŒåŒæ—¶å…¶æŒä¹…åŒ–ç¼“å­˜ã€æ¨¡å—è”é‚¦ã€æ›´ä¼˜çš„ Tree Shaking ç­‰ç‰¹æ€§éƒ½ä¸ºé¡¹ç›®çš„ç¼–è¯‘æµç¨‹æä¾›äº†æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚

å…¶ä¸­çš„**æŒä¹…åŒ–ç¼“å­˜åŠŸèƒ½**æ˜¯æœ€é‡è¦çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œèƒ½æå¤§æå‡å†æ¬¡ç¼–è¯‘æ—¶çš„é€Ÿåº¦ã€‚ä½†åŒæ—¶ä¹Ÿå¼•å…¥äº†å¦‚ä½•ä½¿ç¼“å­˜å¤±æ•ˆçš„é—®é¢˜ã€‚

Taro éµå¾ª Webpack **â€œç¼–è¯‘å®‰å…¨æ¯”ç¼–è¯‘é€Ÿåº¦é‡è¦â€** çš„ç†å¿µï¼Œé»˜è®¤ä¸å¼€å¯æŒä¹…åŒ–ç¼“å­˜ã€‚å½“å¼€å‘è€…è®¾è®¡å¥½ç¼“å­˜ç­–ç•¥åï¼Œå¼ºçƒˆå»ºè®®å¼€å¯æŒä¹…åŒ–ç¼“å­˜ã€‚è¯¦ç»†é…ç½®è¯·å‚è€ƒ [mini.cache](/docs/next/config-detail#cache)ã€‚

### 2. ä¾èµ–é¢„ç¼–è¯‘

Webpack5 å¦ä¸€ä¸ªé‡è¦çš„ç‰¹æ€§è¦æ•°**æ¨¡å—è”é‚¦ï¼ˆModule Federationï¼‰**ã€‚å— [UmiJS mfsu](https://umijs.org/zh-CN/docs/mfsu) ç‰¹æ€§çš„å¯å‘ï¼Œå¯ä»¥é¢„å…ˆæŠŠé¡¹ç›®çš„ node_modules ä¾èµ–æ‰“åŒ…ä¸ºä¸€ä¸ªæ¨¡å—è”é‚¦ remote åº”ç”¨ï¼Œå†æ¬¡ç¼–è¯‘æ—¶ Webpack åˆ™æ— éœ€å†å¯¹ä¾èµ–è¿›è¡Œç¼–è¯‘ï¼Œä»è€Œæå‡ç¼–è¯‘é€Ÿåº¦ã€‚

ä¾èµ–é¢„ç¼–è¯‘å¯ä»¥åˆ†ä¸ºä¸‰æ­¥ï¼š

1. æ”¶é›†ä¾èµ–
2. æ‰“åŒ…ä¾èµ–
3. æ‰“åŒ… Module Federation Remote åº”ç”¨

Taro å‚è€ƒ [Vite](https://cn.vitejs.dev/) ä½¿ç”¨äº† esbuild æ”¶é›†ç”¨æˆ·ä½¿ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œå¹¶åˆ†åˆ«è¿›è¡Œæ‰“åŒ…ã€‚æ‰“åŒ…åçš„æ¨¡å—ä¼šä½œä¸º Webpack çš„ entryï¼Œæœ€ç»ˆæ‰“åŒ…ä¸ºæ¨¡å—è”é‚¦ Remote åº”ç”¨ï¼Œä¾›ä¸»åº”ç”¨ï¼ˆHostï¼‰æ¶ˆè´¹ã€‚å®ç°ç»†èŠ‚è¯·å‚è€ƒ [RFC æ–‡æ¡£](https://github.com/NervJS/taro/discussions/11533)ã€‚

Taro ä¼šåœ¨å°ç¨‹åºç¯å¢ƒçš„ dev æ¨¡å¼ä¸‹é»˜è®¤å¼€å¯ä¾èµ–é¢„ç¼–è¯‘åŠŸèƒ½ã€‚é¦–æ¬¡ç¼–è¯‘æ—¶ï¼Œå› ä¸ºä½¿ç”¨äº† esbuild æ‰“åŒ…ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œæ‰€ä»¥ä¼šæ¯”æ™®é€šç¼–è¯‘ç¨å¿«ã€‚äºŒæ¬¡ç¼–è¯‘æ—¶ï¼ŒTaro èƒ½ç›´æ¥å¤ç”¨ Remote Appï¼ŒWebpack åªéœ€ç¼–è¯‘ä¸šåŠ¡ä»£ç ï¼Œå› æ­¤æ ¹æ®ä¸åŒé¡¹ç›®ä¼šæœ‰ä¸åŒçš„ç¼–è¯‘æé€Ÿæ•ˆæœã€‚

ä¾èµ–é¢„ç¼–è¯‘çš„æµç¨‹å›¾ï¼š

![https://storage.360buyimg.com/cjj-pub-images/prebundle.png](https://storage.360buyimg.com/cjj-pub-images/prebundle.png)

### 3. æé€Ÿæ•ˆæœ

ä»¥ [NutUI ç»„ä»¶ç¤ºä¾‹åº“](https://github.com/jdf2e/nutui/tree/next/src/sites/mobile-taro/vue)ä¸ºä¾‹ï¼Œåˆ†åˆ«æµ‹è¯• dev ä¸ prod ç¯å¢ƒä¸‹ç¼–è¯‘å¾®ä¿¡å°ç¨‹åºçš„ç¼–è¯‘æé€Ÿæ•ˆæœï¼š

![https://storage.jd.com/cjj-pub-images/compile-speed_dev.png](https://storage.jd.com/cjj-pub-images/compile-speed_dev.png)

![https://storage.jd.com/cjj-pub-images/compile-speed_prod.png](https://storage.jd.com/cjj-pub-images/compile-speed_prod.png)

å¯ä»¥çœ‹å‡ºï¼š

1. åœ¨ dev ç¯å¢ƒä¸‹å› ä¸º Taro é»˜è®¤å¼€å¯äº†ä¾èµ–é¢„ç¼–è¯‘ï¼Œå› æ­¤ Webpack5 é¦–æ¬¡ç¼–è¯‘é€Ÿåº¦æ¯” Webpack4 ç¨å¿«ã€‚è€Œ prod ç¯å¢ƒæ²¡æœ‰é»˜è®¤å¼€å¯ä¾èµ–é¢„ç¼–è¯‘ï¼Œå› æ­¤ä¸¤è€…é€Ÿåº¦ç›¸å½“ï¼ˆè€Œä¸” Webpack5 éœ€è¦å†™å…¥ç¼“å­˜ï¼Œå¯èƒ½ä¼šæ¯” Webpack4 ç¨æ…¢ï¼‰ã€‚
2. æ— è®ºæ˜¯ dev è¿˜æ˜¯ prod ç¯å¢ƒï¼Œåœ¨å®Œå…¨å‘½ä¸­ç¼“å­˜çš„æœ€ä¼˜æƒ…å†µä¸‹ï¼ŒWebpack5 çš„ç¼–è¯‘é€Ÿåº¦éƒ½èƒ½å¾—åˆ°æå¤§æå‡ã€‚å³ä½¿æ˜¯ä¿®æ”¹æºç å¯¼è‡´äº†éƒ¨åˆ†ç¼“å­˜å¤±æ•ˆæ—¶ï¼Œç¼–è¯‘é€Ÿåº¦ä»ç„¶æ¯”é¦–æ¬¡ç¼–è¯‘å¿«å¾—å¤šã€‚

### 4. ä½¿ç”¨

> æ—§é¡¹ç›®å‡çº§åéœ€è¦å®‰è£… Webpack5 çš„ç›¸å…³ä¾èµ–æ‰èƒ½æ­£å¸¸ç¼–è¯‘ï¼Œè¯¦æƒ…è¯·å‚è€ƒä¸‹æ–‡çš„ã€å‡çº§æŒ‡å—ã€‘éƒ¨åˆ†ã€‚

ç®€å•ä¿®æ”¹ Taro çš„ç¼–è¯‘é…ç½®å³å¯å¼€å¯ Webpack5ã€æŒä¹…åŒ–ç¼“å­˜ã€ä¾èµ–é¢„ç¼–è¯‘ç­‰åŠŸèƒ½ï¼š

```jsx
/** config/index.js */
const config = {
  // è‡ªå®šä¹‰ç¼–è¯‘å·¥å…·ï¼Œå¯é€‰ 'Webpack4' æˆ– 'Webpack5'
  compiler: {
    type: 'webpack5',
    // ä¾èµ–é¢„ç¼–è¯‘é…ç½®
    prebundle: {
      enable: true,
    },
  },
  // æŒä¹…åŒ–ç¼“å­˜é…ç½®
  cache: {
    enable: true,
  },
}
```

## äºŒã€å…¼å®¹ React18

React å®˜æ–¹æ­£å¼å‘å¸ƒäº† react v18 ç‰ˆæœ¬ï¼Œå¸¦æ¥äº† Automatic Batchingã€Transitions å’Œ Concurrent ç­‰è¯¸å¤šæ–°ç‰¹æ€§ï¼Œæå‡äº† React æ€§èƒ½ã€‚Taro ä¹Ÿåœ¨ç¬¬ä¸€æ—¶é—´å®Œæˆäº†å¯¹ React18 çš„å…¼å®¹ã€‚

React ç›®å‰å­˜åœ¨ä¸¤ç§å·¥ä½œæ¨¡å¼ï¼š`legacy` å’Œ `concurrent` ã€‚åœ¨ concurrent æ¨¡å¼ä¸‹ï¼Œä¼šä½¿ç”¨ New Client API æ¥æ¸²æŸ“ç»„ä»¶ã€‚

> ä¸è¦å¿˜è®°å°†é¡¹ç›®çš„ react ç‰ˆæœ¬å‡çº§åˆ° v18 å“¦

è¯¦ç»†å†…å®¹è¯·å‚è€ƒ [React 18](https://docs.taro.zone/docs/react-18)

## ä¸‰ã€æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰

### 1. åŠ¨æœº

ä¸ SPAï¼ˆå•é¡µåº”ç”¨ç¨‹åºï¼ŒSingle-Page Applicationï¼‰ç›¸æ¯”ï¼ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰èƒ½å¸¦æ¥å¸¦æ¥**æ›´å¿«çš„é¦–å±æ¸²æŸ“é€Ÿåº¦**å’Œ**æ›´å¥½çš„ SEO**ï¼Œå› æ­¤ SSR åŠŸèƒ½æ˜¯å¤§å®¶æœŸæœ› Taro æ”¯æŒçš„ç‰¹æ€§ä¹‹ä¸€ã€‚

### 2. å®ç°åŸç†

Taro åœ¨ 3.1 ç‰ˆæœ¬æå‡ºäº†**å¼€æ”¾å¼æ¶æ„**çš„æ€æƒ³ï¼Œè®©å¼€å‘è€…å¯ä»¥é€šè¿‡ç¼–å†™æ’ä»¶æ¥è®© Taro æ”¯æŒä¸€ä¸ªæ–°çš„å¹³å°ã€‚

é€šè¿‡ Taro æ’ä»¶ï¼Œå°† React ç”Ÿæ€ä¸­çŸ¥åçš„ Next.js æ¡†æ¶ä½œä¸º Taro çš„ä¸€ä¸ªæ–°çš„ç›®æ ‡å¹³å°ï¼Œä»¥æ­¤è®© Taro èƒ½å¤Ÿæ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ã€‚

ç›®å‰è¿™ä¸ªæ’ä»¶é¡¹ç›®çš„åœ°å€ä½äºï¼š[SyMind/tarojs-plugin-platform-nextjs](https://github.com/SyMind/tarojs-plugin-platform-nextjs)

> **âš ï¸Â  æ’ä»¶ç›®å‰å¤„äºæ—©æœŸå»ºè®¾ä¸­ï¼Œä¸å»ºè®®ç”¨äºç”Ÿäº§ç¯å¢ƒï¼**

### 3. å®‰è£…ä¸ä½¿ç”¨

å®‰è£…æ’ä»¶å’Œ Next.js æ¡†æ¶ã€‚

```bash
# ä½¿ç”¨ npm å®‰è£…æ’ä»¶ä¸ next.js
npm install tarojs-plugin-platform-nextjs next

# ä½¿ç”¨ pnpm å®‰è£…æ’ä»¶ä¸ next.js
pnpm install tarojs-plugin-platform-nextjs next
```

åœ¨ Taro é¡¹ç›®çš„[ç¼–è¯‘é…ç½®](/docs/config)ä¸­æ·»åŠ æœ¬æ’ä»¶ã€‚

```bash
const config = {
  plugins: [
    'tarojs-plugin-platform-nextjs'
  ]
}
```

å¼€å§‹å°è¯•å®ƒå§ï¼

```bash
npx taro build --type nextjs --watch
```

## å››ã€æ”¯æŒå¤šé¡µåº”ç”¨ï¼ˆMPAï¼‰

å¾ˆå¤šåŒå­¦é€šè¿‡é˜…è¯» Taro çš„æºç å‘ç°ï¼ŒTaro æ›¾åœ¨ 1.x æ”¯æŒè¿‡å¤šé¡µé¢åº”ç”¨ï¼Œé€šè¿‡é…ç½® `multi` æ¨¡å¼å°±å¯ä»¥å¼€å¯è¯¥ç‰¹æ€§ï¼Œä½†æ˜¯ç”±äºå¹¶æ²¡æœ‰å¾ˆå¥½æ”¯æŒï¼Œä¹Ÿæ²¡æœ‰ç›¸åº”çš„ä¸šåŠ¡åœºæ™¯æµ‹è¯•ï¼Œæœ€ç»ˆå¹¶æ²¡æœ‰åœ¨æ–‡æ¡£ä¸­å‘ˆç°ã€‚

åœ¨ 2.x å‘å¸ƒæ—¶ï¼Œç”±äºå„ç§åŸå› æˆ‘ä»¬å›æ»šäº†è¯¥ç‰¹æ€§ï¼Œå°½ç®¡å¼€å‘è€…ä»¬ä¾æ—§å¯ä»¥é€šè¿‡æ’ä»¶æˆ–è€…åœ¨é¡¹ç›®å†…è‡ªå®šä¹‰ webpack é…ç½®å®ç°ç±»ä¼¼çš„éœ€æ±‚ï¼Œä¸è¿‡è¿™ä¾æ—§ä¼šåœ¨ä¸€äº›ç»†èŠ‚ä¸Šéš¾ä»¥å¤„ç†å¾—å°½å–„å°½ç¾ã€‚æ¯”å¦‚éœ€è¦é¢å¤–é…ç½®æ–‡ä»¶æ‹†åˆ†è§„åˆ™é¿å…å†—ä½™çš„ä»£ç ï¼Œå¯¹äº MPA ä¹Ÿå¹¶ä¸éœ€è¦`taro-router`æä¾›å¯¹äºè·¯ç”±ç›¸å…³çš„äº‹ä»¶æ–¹æ³•çš„æ”¯æŒâ€¦â€¦

MPA æ˜¯ä¸å°‘ç¤¾åŒºå¼€å‘è€…æ‰€è¿½æ±‚çš„é‡è¦ç‰¹æ€§ä¹‹ä¸€ï¼Œä¸ºæ­¤æˆ‘ä»¬æ”¹å†™äº† `taro-loader` å’Œ `taro-router` ä»¥é€‚åº”è¯¥æ¨¡å¼çš„ä¸ªæ€§åŒ–éœ€æ±‚ï¼Œåº”ç”¨è¯¥æ¨¡å¼ä¹Ÿåªéœ€è¦å¦‚ä¸‹é…ç½®ï¼š

```jsx
module.exports = {
  // ...
  h5: {
    // ...
    router: {
      mode: 'multi',
    },
  },
}
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ‰å¾ˆå¤šå°ç¨‹åºäº‹ä»¶å’Œæ–¹æ³•éƒ½æ˜¯åŸºäº SPA æ¨¡å¼è®¾è®¡ä½¿ç”¨çš„ï¼Œåœ¨ MPA æ¨¡å¼å¹¶ä¸é€‚ç”¨ï¼Œæ‰€ä»¥ä¼šå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ç”±äºå¤šé¡µé¢å¯¼è‡´ TabBar ä¼šé‡å¤åŠ è½½ï¼ŒApp çº§çš„ç”Ÿå‘½å‘¨æœŸä¼šé‡å¤è§¦å‘ï¼Œä¸æ”¯æŒè·¯ç”±åŠ¨ç”»ï¼Œç”Ÿäº§ç¯ä¹Ÿéœ€è¦é¢å¤–é…ç½®è·¯ç”±æ˜ å°„ç­‰ç­‰ï¼Œå¼€å¯è¯¥æ¨¡å¼å‰éœ€è¦è®¤çœŸè€ƒé‡é€‚ç”¨åœºæ™¯ã€‚

## äº”ã€RN **ç›¸å…³ä¾èµ–åº“ç”± unimodules å‡çº§è‡³ expo**

Expo æ˜¯ React Native ç”Ÿæ€ä¸­çš„é‡è¦è§’è‰²ï¼Œæä¾›äº†éå¸¸å¤šä¼˜ç§€çš„æ¨¡å—ï¼Œåœ¨ Taro ä¸­æœ‰è¾ƒä¸ºå¹¿æ³›çš„ä½¿ç”¨ï¼Œå¦‚ expo-avã€expo-camera ç­‰ï¼Œå°†æ¥æˆ‘ä»¬è¿˜ä¼šæŒç»­æ¥å…¥æ–°çš„æ¨¡å—ã€‚Expo çš„æ¨¡å—ç³»ç»Ÿï¼Œç”± unimodules å˜æ›´ä¸º expo å·²æœ‰ä¸€æ®µæ—¶æ—¥ï¼Œå…¶æ¶æ„å˜æ›´åŸå› å¯å‚è€ƒæ–‡ç« ï¼šÂ [Whatâ€™s new in Expo modules infrastructure](https://blog.expo.dev/whats-new-in-expo-modules-infrastructure-7a7cdda81ebc)ã€‚

Taro v3.5 åŠä»¥åå°†ä½¿ç”¨æ–°çš„æ¨¡å—ç³»ç»Ÿï¼Œå¯ä»¥é€šè¿‡ taro init é€‰æ‹© react-native æ¨¡æ¿ä½“éªŒã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Taro å£³å·¥ç¨‹ï¼Œå¯åˆ‡æ¢åˆ° [0.67.0-expo](https://github.com/NervJS/taro-native-shell/tree/0.67.0-expo) åˆ†æ”¯ä½“éªŒã€‚

æ–°è€ç‰ˆæœ¬çš„ Taro åŠå£³å·¥ç¨‹ä¹‹é—´æ··ç”¨çš„è¯ï¼Œå°†å­˜åœ¨ä¸å…¼å®¹æƒ…å†µï¼Œä¸»è¦åŸå› æ˜¯å­˜åœ¨å¤šä¸ªç‰ˆæœ¬åŸç”Ÿä¾èµ–å¯¼è‡´ï¼Œå¯é€šè¿‡ resolution è¿›è¡Œç‰ˆæœ¬é”å®šè§£å†³ï¼Œç›¸åº”ç‰ˆæœ¬å‚è€ƒ[æ­¤å¤„](https://github.com/NervJS/taro/discussions/11565#discussioncomment-2552958)ã€‚

åç»­å£³çš„å·¥ç¨‹å°†ä¸å†åŒ…å« unimodules ç‰ˆæœ¬ã€‚æ—§ç‰ˆæœ¬å‡çº§å¯å‚è€ƒæ­¤[PR](https://github.com/NervJS/taro-native-shell/pull/72)ã€‚

æ³¨æ„ï¼šå‡çº§ä¸º expo å°†ä¸å†æ”¯æŒ iOS 11ï¼Œè¯¦ç»†å†…å®¹è¯·å‚è€ƒ [discussions](https://github.com/NervJS/taro/discussions/11565)ã€‚

## å…­ã€å‡çº§æŒ‡å—

1**. å®‰è£… v3.5.0-beta çš„ CLI å·¥å…·ï¼š**

```bash
npm i -g @tarojs/cli@beta
```

**2. æ›´æ–°é¡¹ç›®ä¾èµ–**

> å¦‚æœå®‰è£…å¤±è´¥æˆ–æ‰“å¼€é¡¹ç›®å¤±è´¥ï¼Œå¯ä»¥åˆ é™¤ node_modulesã€yarn.lockã€package-lock.json åé‡æ–°å®‰è£…ä¾èµ–å†å°è¯•ã€‚

2.1 æŠŠ package.json æ–‡ä»¶ä¸­ Taro ç›¸å…³ä¾èµ–çš„ç‰ˆæœ¬ä¿®æ”¹ä¸º `3.5.0@beta`

2.2 Breakings

- Vue2 é¡¹ç›®éœ€è¦æ·»åŠ  devDenpendenciesï¼š`"@vue/babel-preset-jsx": "^1.2.4â€`
- Vue3 é¡¹ç›®éœ€è¦æ·»åŠ  devDenpendenciesï¼š`"@vue/babel-plugin-jsx": "^1.0.6"`
- React é¡¹ç›®éœ€è¦æ·»åŠ  devDenpendenciesï¼š
  ```jsx
  "@pmmmwh/react-refresh-webpack-plugin": "0.5.4",
  "react-refresh": "0.11.0"
  ```
- Preact é¡¹ç›®éœ€è¦æ·»åŠ  devDenpendenciesï¼š

      ```jsx
      "@prefresh/webpack": "^3.2.3",
      "@prefresh/babel-plugin": "^0.4.1"
      ```

  2.3 é‡æ–°å®‰è£…ä¾èµ–

**3. ä½¿ç”¨ Webpack5**

æ–°é¡¹ç›®åœ¨åˆ›å»ºé¡¹ç›®æ—¶ï¼Œé€‰æ‹©ç¼–è¯‘å·¥å…·ä¸º `"webpack5"` å³å¯ã€‚

æ—§é¡¹ç›®å‡çº§åéœ€è¦æ›´æ–°ä¾èµ–ï¼š

- å»ºè®®é¦–å…ˆåˆ é™¤ `node_modules`ã€`yarn.lock`ã€`package-lock.json`ã€‚
- `package.json` ä¸­åˆ é™¤ `@tarojs/mini-runner` å’Œ `@tarojs/webpack-runner` ä¾èµ–ï¼Œæ·»åŠ  `@tarojs/webpack5-runner` ä¾èµ–ã€‚
- é‡æ–°å®‰è£…ä¾èµ–ã€‚
- Taro ç¼–è¯‘é…ç½®æ·»åŠ  `compiler: 'webpack5'`ï¼Œæœ€åå¼€å¯ç¼–è¯‘ã€‚

## æœ€å

æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šç»§ç»­å¯¹ `v3.5` ç‰ˆæœ¬è¿›è¡Œè¿­ä»£ï¼ŒåŒ…æ‹¬å®ç° H5 çš„ä¾èµ–é¢„ç¼–è¯‘ç­‰ã€‚è€Œåœ¨ `v3.6` ç‰ˆæœ¬åˆ™ä¼šè½åœ°å¯¹ Vite çš„æ”¯æŒï¼ŒåŒæ—¶ä¼˜åŒ–è¿è¡Œæ—¶çš„æ€§èƒ½ã€‚

æœ€åçš„æœ€åï¼Œè¡·å¿ƒå„ä½æ„Ÿè°¢å‚ä¸ Taro å¼€æºå…±å»ºçš„åŒå­¦ï¼ä¸ºäº†å»ºç«‹æ›´åŠ å®Œå–„ã€æ›´åŠ å¯æŒç»­çš„ Taro å¼€æºç”Ÿæ€ï¼Œçªå‡ºè´¡çŒ®è€…ä»·å€¼ï¼ŒTaro æ¨å‡ºäº†[æ›´æ¸…æ™°çš„å‚ä¸æœºåˆ¶å’Œè£èª‰æ¿€åŠ±æœºåˆ¶](/blog/2022/03/29/Taro-community)ï¼Œæ¬¢è¿æ›´å¤šçš„åŒå­¦å‚ä¸è¿›æ¥~
