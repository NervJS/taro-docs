---
title: Taro v3.5 æ­£å¼å‘å¸ƒï¼šå¼€å‘ä½“éªŒæå‡
authors: [zhiqingchen, SyMind, Flame, JJ, TJ]
tags: [v3]
description: 'Taro v3.5 æ­£å¼ç‰ˆæœ¬å‘å¸ƒ ğŸš€'
---

è·ç¦» Taro 3.5 çš„ Beta ç‰ˆæœ¬å‘å¸ƒå·²æœ‰ä¸¤ä¸ªæœˆçš„æ—¶é—´ï¼ŒæœŸé—´æˆ‘ä»¬åœ¨ä¸æ–­åœ°å¯¹åŸºäº Webpack5 çš„ç¼–è¯‘ç³»ç»Ÿã€åŸºäº Next.js çš„ SSR ç­‰åŠŸèƒ½è¿›è¡Œæ‰“ç£¨çš„åŒæ—¶ï¼Œæ–°å¢äº†å¯¹ pnpm çš„æ”¯æŒç­‰æ–°åŠŸèƒ½ã€‚æ­¤å¤– Taro ç¤¾åŒºä¹Ÿæœ‰å¾ˆå¤šåŒå­¦å‚ä¸å…±å»ºï¼Œå¦‚ Taro åˆä½œè€… [@biorz](https://github.com/biorz) ä¸º ReactNative ä¾§è´¡çŒ®äº†é‡è¦ç‰¹æ€§ï¼šæ”¯æŒæŠŠ Taro ç»„ä»¶ç¼–è¯‘ä¸º RN ç»„ä»¶ã€‚

æ—¥å‰ Taro v3.5 å·²æ­£å¼å‘å¸ƒï¼Œä¸‹æ–‡å°†ä»‹ç»å…³äº 3.5 çš„ä¸»è¦ç‰¹æ€§ä¸é‡è¦ä¿®å¤ï¼Œä»¥åŠåç»­çš„ç‰ˆæœ¬è§„åˆ’ã€‚

## ä¸€ã€ç¼–è¯‘æé€Ÿ

Taro v3.5 åŸºäº Webpack5 æ„å»ºäº†æ–°çš„ç¼–è¯‘ç³»ç»Ÿï¼Œåˆ©ç”¨æŒä¹…åŒ–ç¼“å­˜ã€ä¾èµ–é¢„ç¼–è¯‘ã€SWC ç­‰æ–¹æ³•ä¸å·¥å…·ï¼Œå¤§å¹…é™ä½äº†ç¼–è¯‘æ‰€éœ€è€—æ—¶ã€‚å¼€å‘è€…å¯ä»¥è‡ªç”±é€‰æ‹©åˆ‡æ¢ä½¿ç”¨ Webpack5 è¿›è¡Œç¼–è¯‘ï¼Œä¹Ÿå¯ä»¥ç»§ç»­ä¿æŒä½¿ç”¨ Webpack4ï¼Œå¦å¤–åœ¨ v3.6 ä¸­ Taro è¿˜å°†æ”¯æŒä½¿ç”¨ Vite è¿›è¡Œç¼–è¯‘ã€‚

> ä¾èµ–é¢„ç¼–è¯‘å¯ä»¥é¢„å…ˆæŠŠé¡¹ç›®çš„ç¬¬ä¸‰æ–¹ä¾èµ–æ‰“åŒ…ä¸ºä¸€ä¸ªæ¨¡å—è”é‚¦ remote åº”ç”¨ï¼Œå†æ¬¡ç¼–è¯‘æ—¶ Webpack æ— éœ€å†å¯¹è¿™äº›ä¾èµ–è¿›è¡Œç¼–è¯‘ï¼Œä»è€Œæå‡ç¼–è¯‘é€Ÿåº¦ã€‚å…³äº Webpack5 ç¼–è¯‘ç³»ç»Ÿçš„å®ç°ç»†èŠ‚ï¼Œè¯·æµè§ˆ ã€ŠTaro v3.5 beta ç¼–è¯‘æé€Ÿã€‹

v3.5 Beta å‘å¸ƒåï¼Œæˆ‘ä»¬è¡¥å…¨äº† H5 ç«¯çš„ä¾èµ–é¢„ç¼–è¯‘åŠŸèƒ½ï¼Œå¹¶ä¸”æŠŠä¾èµ–é¢„ç¼–è¯‘ä½œä¸ºä¸€ä¸ªé€šç”¨èƒ½åŠ›æå–äº†å‡ºæ¥ã€‚å¯ä¾› Taro ä»¥å¤–çš„ä½¿ç”¨ Webpack5 çš„ H5 é¡¹ç›®ä½¿ç”¨ï¼Œé€šè¿‡ `@tarojs/webpack5-prebundle` è¿›è¡Œç¼–è¯‘æé€Ÿï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•å¯å‚è€ƒ[ç›¸å…³æ–‡æ¡£](/docs/next/prebundle#%E7%AC%AC%E4%B8%89%E6%96%B9%E6%8E%A5%E5%85%A5)ã€‚

### æé€Ÿæ•ˆæœ

ä»¥ [NutUI ç»„ä»¶ç¤ºä¾‹åº“](https://github.com/jdf2e/nutui/tree/next/src/sites/mobile-taro/vue) ä¸ºä¾‹ï¼Œå°ç¨‹åºã€H5 ç«¯çš„ç¼–è¯‘é€Ÿåº¦æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š

**å°ç¨‹åºï¼š**

![GroupBar-20220725.jpeg](https://storage.360buyimg.com/cjj-pub-images/mini-speed.jpeg)

**H5ï¼š**

![GroupBar-20220725 (1).jpeg](https://storage.360buyimg.com/cjj-pub-images/web-speed.jpeg)

ä½¿ç”¨æ–¹æ³•

ç®€å•ä¿®æ”¹ Taro çš„ç¼–è¯‘é…ç½®å³å¯åˆ‡æ¢ä½¿ç”¨ Webpack4 æˆ– Webpack5 è¿›è¡Œç¼–è¯‘ï¼š

```js
/** config/index.js */
const config = {
  // è‡ªå®šä¹‰ç¼–è¯‘å·¥å…·ï¼Œå¯é€‰ 'Webpack4' æˆ– 'Webpack5'
  compiler: 'webpack4' || 'webpack5',
}
```

## äºŒã€RN

### 1. React Native 0.68 ç‰ˆæœ¬æ”¯æŒ

[React Native 0.68 ç‰ˆæœ¬å·²äº 2022-3-30 æ­£å¼å‘å¸ƒ](https://reactnative.dev/blog/2022/03/30/version-068)ã€‚0.68 æ˜¯é¦–ä¸ªå¯é€‰æ¥å…¥ New Architecture çš„ç‰ˆæœ¬ï¼Œæ–°æ¶æ„æœ‰æœ›ä¸º RN å¸¦æ¥æ€§èƒ½å’Œä½“éªŒä¸Šçš„é£è·ƒã€‚Taro é»˜è®¤é€‰æ‹©çš„ RN ç‰ˆæœ¬ï¼Œæ­£å¼åˆ‡æ¢åˆ°äº† 0.68ï¼Œå¼€å‘è€…é€šè¿‡ `taro init` é€‰æ‹© `react-native` æ¨¡æ¿å³å¯ã€‚

å¦å¤– 0.69 ç‰ˆæœ¬çš„é€‚é…ï¼Œä¹Ÿåœ¨è¿›å±•ä¸­ã€‚

### 2. RN **ç›¸å…³ä¾èµ–åº“ç”± unimodules å‡çº§è‡³ expo**

Expo æ˜¯ React Native ç”Ÿæ€ä¸­çš„é‡è¦è§’è‰²ï¼Œæä¾›äº†éå¸¸å¤šä¼˜ç§€çš„æ¨¡å—ï¼Œåœ¨ Taro ä¸­æœ‰è¾ƒä¸ºå¹¿æ³›çš„ä½¿ç”¨ï¼Œå¦‚ expo-avã€expo-camera ç­‰ï¼Œå°†æ¥æˆ‘ä»¬è¿˜ä¼šæŒç»­æ¥å…¥æ–°çš„æ¨¡å—ã€‚Expo çš„æ¨¡å—ç³»ç»Ÿï¼Œç”± unimodules å˜æ›´ä¸º expo å·²æœ‰ä¸€æ®µæ—¶æ—¥ï¼Œå…¶æ¶æ„å˜æ›´åŸå› å¯å‚è€ƒæ–‡ç« ï¼šÂ [Whatâ€™s new in Expo modules infrastructure](https://blog.expo.dev/whats-new-in-expo-modules-infrastructure-7a7cdda81ebc)ã€‚

Taro v3.5 åŠä»¥åå°†ä½¿ç”¨æ–°çš„æ¨¡å—ç³»ç»Ÿï¼Œåç»­å£³å·¥ç¨‹ä¸å†åŒ…å« unimodules ç‰ˆæœ¬ã€‚æ—§ç‰ˆæœ¬å‡çº§å¯å‚è€ƒæ­¤ [PR](https://github.com/NervJS/taro-native-shell/pull/72)ï¼Œå‡çº§è¿‡ç¨‹è¾ƒä¸ºç¹çï¼Œå»ºè®®é‡æ–° init ä¸€ä¸ªä»“åº“ï¼Œå†å°†ä¸šåŠ¡æ”¹åŠ¨åŒæ­¥ã€‚å‡çº§ä¸º expo åï¼Œä¸å†æ”¯æŒ iOS 11ï¼Œè¯¦ç»†å†…å®¹è¯·å‚è€ƒ [discussions](https://github.com/NervJS/taro/discussions/11565)ã€‚

### 3. **æ”¯æŒæŠŠ Taro ç»„ä»¶ç¼–è¯‘ä¸º React Native ç»„ä»¶**

å¦‚æœæ‚¨æƒ³åœ¨ç°å­˜çš„ React Native é¡¹ç›®ä¸­(é Taro RN )ï¼Œå¤ç”¨æ‚¨çš„ Taro ç»„ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–°åŠŸèƒ½æˆ–è®¸é€‚åˆæ‚¨ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç¼–è¯‘ç»„ä»¶ï¼Œç¼–è¯‘åçš„ç»„ä»¶äº§ç‰©å¯ä»¥ç›´æ¥åœ¨ React Native é¡¹ç›®ä¸­ä½¿ç”¨ã€‚ è¯¦ç»†å†…å®¹è¯·å‚è€ƒ [discussions](https://github.com/NervJS/taro/discussions/11860)ã€‚

```bash
taro build native-components --type rn
```

### 4. ç¼–è¯‘æ‰“åŒ…æ–¹æ¡ˆä¼˜åŒ–

Android çš„æ‰“åŒ…è¿‡ç¨‹ï¼Œä»è°ƒç”¨ gradlew æ”¹ä¸ºä½¿ç”¨ Â [fastlane](https://docs.fastlane.tools/)ï¼Œå°†æ‰“åŒ…è¿‡ç¨‹é…ç½®åŒ–ï¼Œå°½å¯èƒ½åœ°å‡å°‘å¯¹ RN åˆå§‹åŒ–ååŸç”Ÿä»£ç çš„å…¥ä¾µã€‚ç›¸å…³é…ç½®ä½äº Â `android/fastlane`ï¼Œç›®å‰ä»…åšäº†åŸºç¡€é…ç½®ï¼Œå¼€å‘è€…å¯è¿›ä¸€æ­¥è‡ªå®šä¹‰ã€‚

åˆšæ¥è§¦ Taro å¼€å‘ APP çš„å¼€å‘è€…ï¼Œç»å¸¸åœ¨å¼€å‘ç¯å¢ƒçš„é…ç½®ä¸Šï¼Œæ¶ˆè€—å¤§é‡æ—¶é—´ã€‚å†æ¬¡å»ºè®®å¤§å®¶å…ˆå­¦ä¹ åˆ©ç”¨ GitHub Action è¿›è¡Œæ‰“åŒ…ç¼–è¯‘ï¼Œç›¸å…³ä»£ç ä½äº `.github` ç›®å½•ä¸­ã€‚

### 5. è°ƒè¯•å·¥å…· Taro Playground å‡çº§è‡³ Taro 3.5 ç‰ˆæœ¬åŠ React Native 0.68

[Taro Playground](https://github.com/wuba/taro-playground) ä½œä¸º Taro RN ç«¯çš„è°ƒè¯•å·¥å…·åŠè·¨ç«¯ Demoï¼Œè¿›è¡Œäº†åŒæ­¥æ›´æ–°ã€‚æ­¤æ¬¡æ›´æ–°æ— æ³•ä¿è¯å‘ä¸‹å…¼å®¹ï¼Œä½¿ç”¨æ—§ç‰ˆæœ¬ Taro çš„å¼€å‘è€…ï¼Œå¦‚éœ€è°ƒè¯• Androidï¼Œå¯åœ¨ [releases](https://github.com/wuba/taro-playground/releases) ä¸­ä¸‹è½½æ—§åŒ…è¿›è¡Œè°ƒè¯•ã€‚åœ¨ App Store ä¸­ï¼Œæˆ‘ä»¬åªä¸Šæ¶æœ€æ–°ç‰ˆæœ¬ï¼Œéœ€è¦æ—§ç‰ˆæœ¬çš„å¼€å‘è€…è¯·ä¸è¦å¼€å¯åº”ç”¨è‡ªåŠ¨æ›´æ–°ã€‚å¦‚ä¸æ…å‡çº§ï¼Œéœ€è‡ªè¡Œæ‰“åŒ…ç¼–è¯‘ï¼Œæˆ–è”ç³»æˆ‘ä»¬åŠ å…¥æµ‹è¯•ç»„ã€‚

### 6. å£³å·¥ç¨‹ä»£ç æ•´ç†

å¯¹äº 0.68 ç‰ˆæœ¬çš„[å£³å·¥ç¨‹](https://github.com/NervJS/taro-native-shell/tree/0.68.0)ï¼Œæˆ‘ä»¬è¿›è¡Œäº†ä»£ç çš„é‡æ–°æ•´ç†ã€‚å°†åˆå§‹åŒ– RNã€å®‰è£… expoã€å…¼å®¹ Taroã€å®‰è£…ä¾èµ–ã€æ·»åŠ  Github Actionï¼Œæ¯ä¸€ä¸ªæ­¥éª¤ä¸€ä¸€åˆ—å‡ºï¼Œæ–¹ä¾¿å¼€å‘è€…åœ¨å®šåˆ¶å£³å·¥ç¨‹æ—¶è¿›è¡Œå‚è€ƒã€‚

## ä¸‰ã€pnpm

ä¼—æ‰€å‘¨çŸ¥ï¼Œpnpm åœ¨å½“ä¸‹è¢«èª‰ä¸ºâ€œæœ€å…ˆè¿›çš„åŒ…ç®¡ç†å·¥å…·â€ï¼Œå®ƒæ˜¯ç”± npm/yarn è¡ç”Ÿè€Œæ¥ï¼Œè§£å†³äº† npm/yarn å†…éƒ¨æ½œåœ¨çš„ bugï¼Œæå¤§çš„ä¼˜åŒ–äº†æ€§èƒ½ï¼Œæ‰©å±•äº†ä½¿ç”¨åœºæ™¯ã€‚åœ¨ç¤¾åŒºå†…å¾ˆé«˜çš„å‘¼å£°ä¸‹ï¼ŒTaro ä¹Ÿåœ¨æä¾›äº†è¿™ä¸€çƒ­é—¨çš„åŒ…ç®¡ç†å·¥å…·é€‰é¡¹ã€‚

åœ¨ Taro v3.5 ç‰ˆæœ¬ä»¥åï¼Œåœ¨è„šæ‰‹æ¶å†…ç½®åŒ…ç®¡ç†å·¥å…·ä¸å†è‡ªåŠ¨è¯†åˆ«æœ¬åœ°ç¯å¢ƒå†…å®‰è£…çš„åŒ…ç®¡ç†å·¥å…·ï¼Œè€Œæ˜¯éœ€è¦å¼€å‘è€…è‡ªè¡Œé€‰æ‹©éœ€è¦çš„åŒ…ç®¡ç†å·¥å…·ï¼Œä¾›å¼€å‘è€…æ›´æ–¹ä¾¿ä½¿ç”¨å’Œæ“ä½œã€‚

```bash
? è¯·é€‰æ‹©åŒ…ç®¡ç†å·¥å…· (Use arrow keys)
â¯ yarn
  pnpm
  npm
  cnpm
```

å¦‚æœæ˜¯åœ¨è¾ƒæ—§çš„ Taro é¡¹ç›®ä¸­ï¼Œæƒ³ä½¿ç”¨ pnpm ç®¡ç†å·¥å…·ï¼Œç”±äº**å¹½çµä¾èµ–**çš„å­˜åœ¨ï¼Œå¼€å‘è€…éœ€è¦åœ¨é¡¹ç›®ä¸­æ‰‹åŠ¨å®‰è£…å¹¶å‡çº§ä¾èµ–æ¥ä¿®å¤è¯¥é—®é¢˜ï¼Œå…·ä½“æ“ä½œå¯å‚è€ƒæ–‡ä¸­`å‡çº§æŒ‡å—`ç¬¬ 5 é¡¹ã€‚

## å››ã€å…¶å®ƒç‰¹æ€§

é™¤äº†ä»¥ä¸Šæ–°ç‰¹æ€§å¤–ï¼Œv3.5 è¿˜åŒ…æ‹¬å¾ˆå¤šé‡è¦çš„æ›´æ–°ï¼š

### 1. é€‚é… React 18

ä» Taro v3.5 å¼€å§‹ï¼ŒTaro å°†é»˜è®¤ä½¿ç”¨ React 18 ç‰ˆæœ¬ã€‚ä½ å¯ä»¥åœ¨ Taro ä½¿ç”¨ React18 ä¸­æ¿€åŠ¨äººå¿ƒçš„æ–°ç‰¹æ€§äº†ã€‚ä»æ–°å»ºé¡¹ç›®å¼€å§‹æ¢ç´¢å§ï¼š

```bash
# @tarojs/cli å‡çº§åˆ° v3.5
$ taro init myProject
# é€‰æ‹©ã€Œreactã€æ¡†æ¶
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå—å°ç¨‹åºç¯å¢ƒé™åˆ¶ï¼Œè¯¸å¦‚æ–° Suspense ç‰¹æ€§å°†ä¸èƒ½åœ¨å°ç¨‹åºä¸­ä½¿ç”¨ï¼Œè¯¦æƒ…è¯·[æµè§ˆæ–‡æ¡£](/docs/react-18)ã€‚

### 2. H5 æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“

é€šè¿‡ [tarojs-plugin-platform-nextjs](https://github.com/SyMind/tarojs-plugin-platform-nextjs) æ’ä»¶é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥å°† Taro å’Œ nextjs ç¤¾åŒºç”Ÿæ€æ‰“é€šï¼Œè®© Taro H5 æ”¯æŒ Pre-renderingï¼ˆé¢„æ¸²æŸ“ï¼‰ã€SSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ï¼‰å’Œ ISRï¼ˆå¢é‡é™æ€ç”Ÿæˆï¼‰å„ç§ç‰¹æ€§ï¼Œæå‡é¡µé¢é¦–å±æ¸²æŸ“é€Ÿåº¦ ğŸš€ï¼Œä¹Ÿåˆ©äº SEO ä¼˜åŒ– ğŸ”ã€‚

```bash
npm install tarojs-plugin-platform-nextjs next
```

åœ¨ Taro é¡¹ç›®çš„ Â `config/index.js` ä¸­æ·»åŠ æ’ä»¶ã€‚

```js
const config = {
  plugins: ['tarojs-plugin-platform-nextjs'],
}
```

å¯åŠ¨é¡¹ç›®ã€‚

```bash
npx taro build --type nextjs --watch
```

æ’ä»¶æ¥è‡ªç¤¾åŒºå¤§ä½¬ [@SyMind](https://github.com/SyMind) è´¡çŒ®ï¼Œè¯¦ç»†ç”¨æ³•å¯ä»¥å‚è€ƒ[æ’ä»¶æ–‡æ¡£](https://github.com/SyMind/tarojs-plugin-platform-nextjs)ã€‚

### 3. H5 æ”¯æŒå¤šé¡µåº”ç”¨æ¨¡å¼

H5 ç«¯çš„å¤šé¡µåº”ç”¨æ¨¡å¼æ˜¯ç¤¾åŒºå‘¼å£°æœ€é«˜çš„è‹¥å¹²ç‰¹æ€§ä¹‹ä¸€ï¼Œåœ¨æ–°ç‰ˆæœ¬ä¸­å°†å¾—åˆ°æ”¯æŒï¼Œè¯¦ç»†ç”¨æ³•åŠæ³¨æ„äº‹é¡¹è¯·[å‚è€ƒæ–‡æ¡£](/docs/next/config-detail#h5routermode)ã€‚

é…ç½®å¼€å¯å¤šé¡µåº”ç”¨æ¨¡å¼ï¼š

```js
/** config/index.js */
const config = {
  h5: {
    router: {
      mode: 'multi',
    },
  },
}
```

### 4. è¡¥å…¨å¯¹å°ç¨‹åºç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„æ”¯æŒ

è¿‡å» Taro å¯¹äºå°ç¨‹åºå¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ”¯æŒå¾—ä¸å¤Ÿå®Œæ•´ï¼Œæ–°ç‰ˆæœ¬ä¸­å°†è¡¥å…¨å¯¹åº”çš„æ–¹æ³•ä¸é’©å­ã€‚

**æ–°å¢ App ç”Ÿå‘½å‘¨æœŸï¼š**

- onErrorï¼ˆReact & Vue3ï¼‰

**æ–°å¢é’©å­ï¼š**

- useLaunchï¼ˆReactï¼‰
- useErrorï¼ˆReactï¼‰
- usePageNotFoundï¼ˆReactï¼‰
- useLoadï¼ˆReact & Vue3ï¼‰
- useUnloadï¼ˆReact & Vue3ï¼‰
- useSaveExitStateï¼ˆReact & Vue3ï¼‰

### 5. å°ç¨‹åºå†…éƒ¨å®ç°ä¼˜åŒ–

å¯¹å°ç¨‹åºçš„å†…éƒ¨å®ç°è¿›è¡Œä¼˜åŒ–ï¼Œå‡å°‘çº¦ 50k åŒ…ä½“ç§¯ï¼ŒåŒæ—¶é™ä½å†…å­˜å ç”¨ï¼Œå‡å°‘ setData å‘é€çš„æ•°æ®é‡ã€‚

## äº”ã€å‡çº§æŒ‡å—

### 1. å‡çº§ Taro CLI

å‡çº§å…¨å±€çš„ Taro CLIï¼š

```bash
npm i -g @tarojs/cli
```

æˆ–å‡çº§æœ¬åœ°çš„ Taro CLI å·¥å…·ï¼š

```bash
npm i @tarojs/cli
```

### 2. æ›´æ–°é¡¹ç›®ä¾èµ–

> å¦‚æœä¾èµ–å®‰è£…å¤±è´¥æˆ–å®‰è£…æˆåŠŸå´è¿è¡ŒæŠ¥é”™ï¼Œå¯ä»¥å°è¯•åˆ é™¤ node_modulesã€yarn.lockã€package-lock.jsonã€pnpm-lock.yaml åé‡æ–°å®‰è£…ä¾èµ–ã€‚

### 2.1 æ›´æ–°é¡¹ç›®å†…çš„ Taro ç›¸å…³ä¾èµ–

æŠŠ `package.json` ä¸­ Taro ç›¸å…³ä¾èµ–çš„ç‰ˆæœ¬ä¿®æ”¹ä¸º `3.5.0` åé‡æ–°å®‰è£…ä¾èµ–ã€‚

### 2.2 ä½¿ç”¨ React çš„é¡¹ç›®

- **ã€Breakingã€‘**ä½¿ç”¨ React çš„é¡¹ç›®éœ€è¦é¢å¤–å®‰è£… `@pmmmwh/react-refresh-webpack-plugin` å’Œ `react-refresh`ï¼š

```bash
npm i @pmmmwh/react-refresh-webpack-plugin react-refresh --save-dev
```

### 2.3 ä½¿ç”¨ Preact çš„é¡¹ç›®

- **ã€Breakingã€‘**ä½¿ç”¨ Preact çš„é¡¹ç›®éœ€è¦é¢å¤–å®‰è£… `@prefresh/webpack` å’Œ `@prefresh/babel-plugin`ï¼š

```bash
npm i @prefresh/webpack @prefresh/babel-plugin --save-dev
```

### 2.4 ä½¿ç”¨ Vue2 çš„é¡¹ç›®

- **ã€Breakingã€‘**ä½¿ç”¨ Vue2 çš„é¡¹ç›®éœ€è¦é¢å¤–å®‰è£… `@vue/babel-preset-jsx`ï¼š

```bash
npm i @vue/babel-preset-jsx --save-dev
```

### 2.5 ä½¿ç”¨ Vue3 çš„é¡¹ç›®

- **ã€Breakingã€‘**ä½¿ç”¨ Vue3 çš„é¡¹ç›®éœ€è¦é¢å¤–å®‰è£… `@vue/babel-plugin-jsx`ï¼š

```bash
npm i @vue/babel-plugin-jsx --save-dev
```

### 3. ä½¿ç”¨ Webpack5

å¼€å‘è€…éœ€è¦å…ˆå¸è½½ `@tarojs/mini-runner` å’Œ `@tarojs/webpack-runner`ï¼š

```bash
npm uninstall @tarojs/mini-runner @tarojs/webpack-runner
```

ç„¶åå®‰è£… `@tarojs/webpack5-runner`ï¼š

```bash
npm install @tarojs/webpack5-runner
```

æœ€åä¿®æ”¹ Taro ç¼–è¯‘é…ç½®å³å¯ï¼š

```js
/** config/index.js */
const config = {
  compiler: 'webpack5',
}
```

### 4. ä½¿ç”¨ React 18

éœ€è¦æ›´æ–° `react`ã€`react-dom`ã€`@types/react` çš„ç‰ˆæœ¬ï¼š

```bash
npm i react react-dom
```

```bash
npm i @types/react --save-dev
```

### 5. ä½¿ç”¨ pnpm

å› ä¸º pnpm ä¸å…è®¸**å¹½çµä¾èµ–**çš„å­˜åœ¨ï¼Œå› æ­¤å¼€å‘è€…éœ€è¦åœ¨é¡¹ç›®ä¸­æ‰‹åŠ¨å®‰è£…ä¸‹åˆ—ä¾èµ–ï¼š

`dependencies` è¡¥å……ä¾èµ–ï¼š

```json
"@tarojs/helper": "3.5.0",
"@tarojs/plugin-platform-weapp": "3.5.0",
"@tarojs/plugin-platform-alipay": "3.5.0",
"@tarojs/plugin-platform-tt": "3.5.0",
"@tarojs/plugin-platform-swan": "3.5.0",
"@tarojs/plugin-platform-jd": "3.5.0",
"@tarojs/plugin-platform-qq": "3.5.0",
"@tarojs/router": "3.5.0",
"@tarojs/shared": "3.5.0",
"@tarojs/taro-h5": "3.5.0",
```

`devDependencies` è¡¥å……ä¾èµ–ï¼š

å®‰è£…é¡¹ç›®å¯¹åº”çš„ Webpack ç‰ˆæœ¬ï¼Œå¦‚ Webpack5ï¼š

```json
"webpack": "^5.73.0"
```

## å…­ã€æœ€å

ä¸‹åŠå¹´ Taro å›¢é˜Ÿçš„æ ¸å¿ƒå°†å›´ç»•ä»¥ä¸‹å„æ–¹å‘å±•å¼€ï¼š

- æ”¯æŒä½¿ç”¨ Vite è¿›è¡Œç¼–è¯‘ï¼ˆé¢„è®¡ Q3 æ¨å‡º alpha ç‰ˆæœ¬ï¼‰
- å°ç¨‹åºæ–¹é¢å°†æŒç»­å¯¹æ€§èƒ½è¿›è¡Œä¼˜åŒ–ã€æ”¯æŒæ›´å¤šçš„ React/Vue ç‰¹æ€§ï¼ˆå¦‚ Portalï¼‰å’Œç”Ÿæ€åº“ï¼ˆå¦‚ React/Vue Routerï¼‰ã€‚
- H5 æ–¹é¢å°†è¾“å‡ºé€‚é… Vue3 çš„ SSR æ–¹æ¡ˆã€‚
- RN æ–¹é¢å°†æ·±å…¥æ¢ç´¢é«˜é˜¶åŠŸèƒ½ï¼Œå¦‚åœ°å›¾ã€åŠ¨ç”»ã€2D åŠ 3D å›¾å½¢æ–¹æ¡ˆï¼Œå¹¶æ¨å‡ºè·¨ç«¯å¯è§†åŒ–åº“ï¼Œæå‡ Taro è·¨ç«¯èƒ½åŠ›ã€‚
- æ­¤å¤–è¿˜ä¼šæ¢ç´¢å¯¹äº Flutter çš„é€‚é…ã€‚

æœ€åçš„æœ€åï¼Œè¡·å¿ƒæ„Ÿè°¢å‚ä¸ç¤¾åŒºå…±å»ºä¸äº¤æµçš„å„ä½åŒå­¦ï¼ä¸ŠåŠå¹´æˆ‘ä»¬åˆ¶å®šäº†å¼€å‘è€…è´¡çŒ®åˆ¶åº¦ï¼Œå»ºç«‹èµ·è§„èŒƒçš„é¡¹ç›®åˆ†å·¥ä¸æœ‰æ•ˆçš„è£èª‰æ¿€åŠ±æœºåˆ¶ã€‚æœªæ¥ Taro å°†ç§¯ææ¢å¯»æ›´ä¸­ç«‹ä¸å¼€æ”¾çš„å¼€æºæ²»ç†æœºåˆ¶ï¼Œæ¬¢è¿å„ä½å¼€å‘è€…å‚ä¸åˆ° Taro ç¤¾åŒºçš„å»ºè®¾ä¸­~
