"use strict";(self.webpackChunktaro_docs=self.webpackChunktaro_docs||[]).push([[31331],{36512:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>g,contentTitle:()=>u,default:()=>d,frontMatter:()=>i,metadata:()=>c,toc:()=>p});n(37953);var r=n(58860);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const i={title:"Taro.startSoterAuthentication(option)",sidebar_label:"startSoterAuthentication"},u=void 0,c={unversionedId:"apis/open-api/soter/startSoterAuthentication",id:"version-3.x/apis/open-api/soter/startSoterAuthentication",title:"Taro.startSoterAuthentication(option)",description:"Starts SOTER biometric authentication. For the verification procedure, see description.",source:"@site/i18n/en/docusaurus-plugin-content-docs/version-3.x/apis/open-api/soter/startSoterAuthentication.md",sourceDirName:"apis/open-api/soter",slug:"/apis/open-api/soter/startSoterAuthentication",permalink:"/taro-docs/en/docs/3.x/apis/open-api/soter/startSoterAuthentication",draft:!1,editUrl:"https://github.com/nervjs/taro-docs/edit/master/versioned_docs/version-3.x/apis/open-api/soter/startSoterAuthentication.md",tags:[],version:"3.x",frontMatter:{title:"Taro.startSoterAuthentication(option)",sidebar_label:"startSoterAuthentication"},sidebar:"API",previous:{title:"chooseInvoice",permalink:"/taro-docs/en/docs/3.x/apis/open-api/invoice/chooseInvoice"},next:{title:"checkIsSupportSoterAuthentication",permalink:"/taro-docs/en/docs/3.x/apis/open-api/soter/checkIsSupportSoterAuthentication"}},g={},p=[{value:"Type",id:"type",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Option",id:"option",level:3},{value:"SuccessCallbackResult",id:"successcallbackresult",level:3},{value:"requestAuthModes",id:"requestauthmodes",level:3},{value:"API Support",id:"api-support",level:4},{value:"Sample Code",id:"sample-code",level:2},{value:"API Support",id:"api-support-1",level:2}],s={toc:p},y="wrapper";function d(e){var{components:t}=e,n=o(e,["components"]);return(0,r.yg)(y,l(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}({},s,n),{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"Starts SOTER biometric authentication. For the verification procedure, see ",(0,r.yg)("a",{parentName:"p",href:"https://developers.weixin.qq.com/miniprogram/en/dev/framework/open-ability/bio-auth.html"},"description"),"."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"resultJSON description")),(0,r.yg)("p",null,"This data is the JSON data obtained in the device's TEE by combining the incoming challenge parameter and other security information in the TEE. The fields are described as follows."),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Field"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"raw"),(0,r.yg)("td",{parentName:"tr",align:null},"The challenge factor passed in by the caller")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"fid"),(0,r.yg)("td",{parentName:"tr",align:null},"(Supported only on Android) The ID of the biometric information for the current biometric recognition and authentication (for example, for fingerprint recognition, this field indicates the ID of fingerprint information in this device).")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"counter"),(0,r.yg)("td",{parentName:"tr",align:null},"A parameter of the anti-replay feature")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"tee_n"),(0,r.yg)("td",{parentName:"tr",align:null},"TEE name (for example, Qualcomm or trustonic)")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"tee_v"),(0,r.yg)("td",{parentName:"tr",align:null},"TEE version")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"fp_n"),(0,r.yg)("td",{parentName:"tr",align:null},"The provider of the fingerprints and related logic modules (such as the FPC)")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"fp_v"),(0,r.yg)("td",{parentName:"tr",align:null},"The version of the fingerprints and related modules")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"cpu_id"),(0,r.yg)("td",{parentName:"tr",align:null},"The unique device ID")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"uid"),(0,r.yg)("td",{parentName:"tr",align:null},"App ID, which is similar to the UID defined on Android.")))),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},(0,r.yg)("a",{parentName:"p",href:"https://developers.weixin.qq.com/miniprogram/en/dev/api/open-api/soter/wx.startSoterAuthentication.html"},"Reference"))),(0,r.yg)("h2",{id:"type"},"Type"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-tsx"},"(option: Option) => Promise<SuccessCallbackResult>\n")),(0,r.yg)("h2",{id:"parameters"},"Parameters"),(0,r.yg)("h3",{id:"option"},"Option"),(0,r.yg)("table",null,(0,r.yg)("thead",null,(0,r.yg)("tr",null,(0,r.yg)("th",null,"Property"),(0,r.yg)("th",null,"Type"),(0,r.yg)("th",{style:{textAlign:"center"}},"Required"),(0,r.yg)("th",null,"Description"))),(0,r.yg)("tbody",null,(0,r.yg)("tr",null,(0,r.yg)("td",null,"challenge"),(0,r.yg)("td",null,(0,r.yg)("code",null,"string")),(0,r.yg)("td",{style:{textAlign:"center"}},"Yes"),(0,r.yg)("td",null,"Challenge factor, which is the key recognition information of a string used for signing that is prepared by the caller for the current biometric authentication. It serves as a part of ",(0,r.yg)("code",null,"resultJSON")," to help the caller recognize this request. For example, if the user is requested to authorize and confirm an order, the order number can be entered in this parameter.")),(0,r.yg)("tr",null,(0,r.yg)("td",null,"requestAuthModes"),(0,r.yg)("td",null,(0,r.yg)("code",null,'("fingerPrint" | "facial" | "speech")[]')),(0,r.yg)("td",{style:{textAlign:"center"}},"Yes"),(0,r.yg)("td",null,"Accepted biometric authentication methods in the request")),(0,r.yg)("tr",null,(0,r.yg)("td",null,"authContent"),(0,r.yg)("td",null,(0,r.yg)("code",null,"string")),(0,r.yg)("td",{style:{textAlign:"center"}},"No"),(0,r.yg)("td",null,"Verification description, i.e. the hint in a dialog box displayed on the UI during recognition.")),(0,r.yg)("tr",null,(0,r.yg)("td",null,"complete"),(0,r.yg)("td",null,(0,r.yg)("code",null,"(res: any) => void")),(0,r.yg)("td",{style:{textAlign:"center"}},"No"),(0,r.yg)("td",null,"The callback function used when the API call completed (always executed whether the call succeeds or fails)")),(0,r.yg)("tr",null,(0,r.yg)("td",null,"fail"),(0,r.yg)("td",null,(0,r.yg)("code",null,"(res: any) => void")),(0,r.yg)("td",{style:{textAlign:"center"}},"No"),(0,r.yg)("td",null,"The callback function for a failed API call")),(0,r.yg)("tr",null,(0,r.yg)("td",null,"success"),(0,r.yg)("td",null,(0,r.yg)("code",null,"(res: Result) => void")),(0,r.yg)("td",{style:{textAlign:"center"}},"No"),(0,r.yg)("td",null,"The callback function for a successful API call")))),(0,r.yg)("h3",{id:"successcallbackresult"},"SuccessCallbackResult"),(0,r.yg)("table",null,(0,r.yg)("thead",null,(0,r.yg)("tr",null,(0,r.yg)("th",null,"Property"),(0,r.yg)("th",null,"Type"),(0,r.yg)("th",null,"Description"))),(0,r.yg)("tbody",null,(0,r.yg)("tr",null,(0,r.yg)("td",null,"authMode"),(0,r.yg)("td",null,(0,r.yg)("code",null,"string")),(0,r.yg)("td",null,"Biometric authentication method")),(0,r.yg)("tr",null,(0,r.yg)("td",null,"resultJSON"),(0,r.yg)("td",null,(0,r.yg)("code",null,"string")),(0,r.yg)("td",null,"The device security information (for example, the name and version of the Trusted Execution Environment (TEE), and anti-replay parameters) obtained in the TEE and information for this authentication (for example, the fingerprint ID. It is supported only on Android).")),(0,r.yg)("tr",null,(0,r.yg)("td",null,"resultJSONSignature"),(0,r.yg)("td",null,(0,r.yg)("code",null,"string")),(0,r.yg)("td",null,"The signature (SHA-256 with RSA/PSS, saltlen=20) on ",(0,r.yg)("code",null,"resultJSON")," generated using the SOTER security key")),(0,r.yg)("tr",null,(0,r.yg)("td",null,"errCode"),(0,r.yg)("td",null,(0,r.yg)("code",null,"number")),(0,r.yg)("td",null,"Error code")),(0,r.yg)("tr",null,(0,r.yg)("td",null,"errMsg"),(0,r.yg)("td",null,(0,r.yg)("code",null,"string")),(0,r.yg)("td",null,"Error message")))),(0,r.yg)("h3",{id:"requestauthmodes"},"requestAuthModes"),(0,r.yg)("table",null,(0,r.yg)("thead",null,(0,r.yg)("tr",null,(0,r.yg)("th",null,"Property"),(0,r.yg)("th",null,"Description"))),(0,r.yg)("tbody",null,(0,r.yg)("tr",null,(0,r.yg)("td",null,"fingerPrint"),(0,r.yg)("td",null,"Fingerprint recognition")),(0,r.yg)("tr",null,(0,r.yg)("td",null,"facial"),(0,r.yg)("td",null,"Face recognition")),(0,r.yg)("tr",null,(0,r.yg)("td",null,"speech"),(0,r.yg)("td",null,"Voiceprint recognition (not supported)")))),(0,r.yg)("h4",{id:"api-support"},"API Support"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:"center"},"API"),(0,r.yg)("th",{parentName:"tr",align:"center"},"WeChat Mini-Program"),(0,r.yg)("th",{parentName:"tr",align:"center"},"H5"),(0,r.yg)("th",{parentName:"tr",align:"center"},"React Native"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"center"},"requestAuthModes.speech"),(0,r.yg)("td",{parentName:"tr",align:"center"}),(0,r.yg)("td",{parentName:"tr",align:"center"}),(0,r.yg)("td",{parentName:"tr",align:"center"})))),(0,r.yg)("h2",{id:"sample-code"},"Sample Code"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-tsx"},"Taro.startSoterAuthentication({\n   requestAuthModes: ['fingerPrint'],\n   challenge: '123456',\n   authContent: 'Unlock with your fingerprint',\n   success: function (res) { }\n})\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "raw":"msg",\n  "fid":"2",\n  "counter":123,\n  "tee_n":"TEE Name",\n  "tee_v":"TEE Version",\n  "fp_n":"Fingerprint Sensor Name",\n  "fp_v":"Fingerprint Sensor Version",\n  "cpu_id":"CPU Id",\n  "uid":"21"\n}\n')),(0,r.yg)("h2",{id:"api-support-1"},"API Support"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:"center"},"API"),(0,r.yg)("th",{parentName:"tr",align:"center"},"WeChat Mini-Program"),(0,r.yg)("th",{parentName:"tr",align:"center"},"H5"),(0,r.yg)("th",{parentName:"tr",align:"center"},"React Native"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"center"},"Taro.startSoterAuthentication"),(0,r.yg)("td",{parentName:"tr",align:"center"},"\u2714\ufe0f"),(0,r.yg)("td",{parentName:"tr",align:"center"}),(0,r.yg)("td",{parentName:"tr",align:"center"})))))}d.isMDXComponent=!0},58860:(e,t,n)=>{n.d(t,{xA:()=>g,yg:()=>d});var r=n(37953);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=r.createContext({}),c=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},g=function(e){var t=c(e.components);return r.createElement(u.Provider,{value:t},e.children)},p="mdxType",s={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},y=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,u=e.parentName,g=i(e,["components","mdxType","originalType","parentName"]),p=c(n),y=a,d=p["".concat(u,".").concat(y)]||p[y]||s[y]||l;return n?r.createElement(d,o(o({ref:t},g),{},{components:n})):r.createElement(d,o({ref:t},g))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,o=new Array(l);o[0]=y;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i[p]="string"==typeof e?e:a,o[1]=i;for(var c=2;c<l;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}y.displayName="MDXCreateElement"}}]);