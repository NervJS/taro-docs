"use strict";(self.webpackChunktaro_docs=self.webpackChunktaro_docs||[]).push([[81476],{32323:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>g,metadata:()=>m,toc:()=>d});n(37953);var r=n(58860),a=n(13669),o=n(47756);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const g={title:"Entry Component"},s=void 0,m={unversionedId:"react-entry",id:"version-3.x/react-entry",title:"Entry Component",description:"Every Taro application needs an entry component to register the application. The default entry file is app.js in the src directory.",source:"@site/i18n/en/docusaurus-plugin-content-docs/version-3.x/react-entry.mdx",sourceDirName:".",slug:"/react-entry",permalink:"/taro-docs/en/docs/3.x/react-entry",draft:!1,editUrl:"https://github.com/nervjs/taro-docs/edit/master/versioned_docs/version-3.x/react-entry.mdx",tags:[],version:"3.x",frontMatter:{title:"Entry Component"},sidebar:"docs",previous:{title:"Overview",permalink:"/taro-docs/en/docs/3.x/react-overall"},next:{title:"Page Components",permalink:"/taro-docs/en/docs/3.x/react-page"}},c={},d=[{value:"Example Code",id:"example-code",level:2},{value:"Entry Component Configuration",id:"entry-component-configuration",level:2},{value:"Life cycle methods",id:"life-cycle-methods",level:2},{value:"onLaunch (options)",id:"onlaunch-options",level:3},{value:"Parameters",id:"parameters",level:4},{value:"options",id:"options",level:5},{value:"options.referrerInfo",id:"optionsreferrerinfo",level:5},{value:"componentDidShow (options)",id:"componentdidshow-options",level:3},{value:"componentDidHide ()",id:"componentdidhide-",level:3},{value:"onPageNotFound (Object)",id:"onpagenotfound-object",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"Object",id:"object",level:5}],y={toc:d},u="wrapper";function h(e){var{components:t}=e,n=p(e,["components"]);return(0,r.yg)(u,i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}({},y,n),{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"Every Taro application needs an entry component to register the application. The default entry file is ",(0,r.yg)("inlineCode",{parentName:"p"},"app.js")," in the ",(0,r.yg)("inlineCode",{parentName:"p"},"src")," directory."),(0,r.yg)("p",null,"In the entry component we can set the global state or access the lifecycle of the mini program entry instance."),(0,r.yg)("h2",{id:"example-code"},"Example Code"),(0,r.yg)(a.A,{defaultValue:"class",values:[{label:"Class Component",value:"class"},{label:"Functional Component",value:"functional"}],mdxType:"Tabs"},(0,r.yg)(o.A,{value:"class",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-jsx",metastring:'title="app.js"',title:'"app.js"'},"import React, { Component } from 'react'\n\n// If we use the Redux\nimport { Provider } from 'react-redux'\nimport configStore from './store'\n\n// Global Style\nimport './app.css'\n\nconst store = configStore()\n\nclass App extends Component {\n  // All React component methods can be used\n  componentDidMount () {}\n\n  // onLaunch\n  onLaunch () {}\n\n  //  onShow\n  componentDidShow () {}\n\n  //  onHide\n  componentDidHide () {}\n\n  render () {\n    // Nothing will be rendered in the entry component, but we can do something like state management here\n    return (\n      <Provider store={store}>\n        /* this.props.children is the page that will be rendered */\n        {this.props.children}\n      </Provider>\n    )\n  }\n}\n\nexport default App\n"))),(0,r.yg)(o.A,{value:"functional",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-jsx",metastring:'title="app.js"',title:'"app.js"'},"import React, { useEffect } from 'react'\n\n// The additional hooks added to Taro should be brought in from '@tarojs/taro'\nimport { useDidShow, useDidHide } from '@tarojs/taro'\n\n// Global Style\nimport { Provider } from 'react-redux'\nimport configStore from './store'\n\n// Global Style\nimport './app.css'\n\nconst store = configStore()\n\nfunction App (props) {\n  // All React Hooks can be used\n  useEffect(() => {})\n\n  // onShow\n  useDidShow(() => {})\n\n  //  onHide\n  useDidHide(() => {})\n\n  return (\n    // Nothing will be rendered in the entry component, but we can do something like state management here\n    <Provider store={store}>\n      {/* props.children is the page that will be rendered */}\n      {props.children}\n    </Provider>\n  )\n}\n\nexport default App\n")))),(0,r.yg)("h2",{id:"entry-component-configuration"},"Entry Component Configuration"),(0,r.yg)("p",null,"Please refer to the ",(0,r.yg)("a",{parentName:"p",href:"./app-config"},"global configuration")),(0,r.yg)("h2",{id:"life-cycle-methods"},"Life cycle methods"),(0,r.yg)("p",null,"In addition to supporting React's lifecycle methods, the portal component additionally supports the following lifecycles according to the mini program's standards."),(0,r.yg)("h3",{id:"onlaunch-options"},"onLaunch (options)"),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},(0,r.yg)("inlineCode",{parentName:"p"},"onLaunch")," of the corresponding app in the mini program environment.")),(0,r.yg)("p",null,"rogram initialization parameters can be accessed during this lifecycle by accessing the ",(0,r.yg)("inlineCode",{parentName:"p"},"options")," parameter or by calling ",(0,r.yg)("inlineCode",{parentName:"p"},"getCurrentInstance().router"),"."),(0,r.yg)("h4",{id:"parameters"},"Parameters"),(0,r.yg)("h5",{id:"options"},"options"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Proerty"),(0,r.yg)("th",{parentName:"tr",align:null},"Type"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"path"),(0,r.yg)("td",{parentName:"tr",align:null},"string"),(0,r.yg)("td",{parentName:"tr",align:null},"Path for launch mini-program")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"scene"),(0,r.yg)("td",{parentName:"tr",align:null},"number"),(0,r.yg)("td",{parentName:"tr",align:null},"Scene values for launch mini-program")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query"),(0,r.yg)("td",{parentName:"tr",align:null},"Object"),(0,r.yg)("td",{parentName:"tr",align:null},"Parameters for launch mini-program")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"shareTicket"),(0,r.yg)("td",{parentName:"tr",align:null},"string"),(0,r.yg)("td",{parentName:"tr",align:null},"shareTicket\uff0cSee Get More Forwarding Information")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"referrerInfo"),(0,r.yg)("td",{parentName:"tr",align:null},"Object"),(0,r.yg)("td",{parentName:"tr",align:null},"Source information. Source information. Returned when accessing an mini-program from another mini-program, public number or app. Otherwise returns {}")))),(0,r.yg)("h5",{id:"optionsreferrerinfo"},"options.referrerInfo"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Proerty"),(0,r.yg)("th",{parentName:"tr",align:null},"Type"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"appId"),(0,r.yg)("td",{parentName:"tr",align:null},"string"),(0,r.yg)("td",{parentName:"tr",align:null},"Source mini-program, or public number (in WeChat)\uff09")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"extraData"),(0,r.yg)("td",{parentName:"tr",align:null},"Object"),(0,r.yg)("td",{parentName:"tr",align:null},"The data passed from the source mini-program is supported by WeChat and Baidu smart-program at scene=1037 or 1038")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"sourceServiceId"),(0,r.yg)("td",{parentName:"tr",align:null},"string"),(0,r.yg)("td",{parentName:"tr",align:null},"Source plugin, visible when in plugin run mode")))),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"}," The options parameter may vary from field to field in different mini-program"),(0,r.yg)("p",{parentName:"blockquote"},"Scene values , there are differences in WeChat Mini-program and Baidu Smart-program, please refer to them respectively  ",(0,r.yg)("a",{parentName:"p",href:"https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/scene.html"},"Wechat Mini-program")," \u548c ",(0,r.yg)("a",{parentName:"p",href:"https://smartprogram.baidu.com/docs/data/scene/"},"Baidu Smart-program Documents"))),(0,r.yg)("h3",{id:"componentdidshow-options"},"componentDidShow (options)"),(0,r.yg)("p",null,"Triggered when the program is started, or foregrounded."),(0,r.yg)("p",null,"As with the ",(0,r.yg)("inlineCode",{parentName:"p"},"onLaunch")," lifecycle, program initialization parameters can be accessed during this lifecycle by accessing the ",(0,r.yg)("inlineCode",{parentName:"p"},"options")," parameter or calling ",(0,r.yg)("inlineCode",{parentName:"p"},"getCurrentInstance().router"),"."),(0,r.yg)("p",null,"The parameters are basically the same as those obtained in ",(0,r.yg)("inlineCode",{parentName:"p"},"onLaunch"),", but with two additional parameters in ",(0,r.yg)("strong",{parentName:"p"},"Baidu Smart-program")," as follows."),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Proerty"),(0,r.yg)("th",{parentName:"tr",align:null},"Type"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"entryType"),(0,r.yg)("td",{parentName:"tr",align:null},"string"),(0,r.yg)("td",{parentName:"tr",align:null},"Source identifier, take the value of user/ schema /sys :",(0,r.yg)("br",null),"user\uff1aIndicates before and after passing home",(0,r.yg)("br",null),"Switching or unlocking the screen, etc. to bring up.",(0,r.yg)("br",null),"schema\uff1aIndicates a protocol call-up;",(0,r.yg)("br",null),"sys\uff1aOther")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"appURL"),(0,r.yg)("td",{parentName:"tr",align:null},"string"),(0,r.yg)("td",{parentName:"tr",align:null},"The call-up protocol at the time of the presentation, which exists only if the value of entryType is schema")))),(0,r.yg)("h3",{id:"componentdidhide-"},"componentDidHide ()"),(0,r.yg)("p",null,"Triggered when the program switches to the background."),(0,r.yg)("h3",{id:"onpagenotfound-object"},"onPageNotFound (Object)"),(0,r.yg)("p",null,"Triggered when the page to be opened by the program does not exist."),(0,r.yg)("h4",{id:"parameters-1"},"Parameters"),(0,r.yg)("h5",{id:"object"},"Object"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Proerty"),(0,r.yg)("th",{parentName:"tr",align:null},"Type"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"path"),(0,r.yg)("td",{parentName:"tr",align:null},"string"),(0,r.yg)("td",{parentName:"tr",align:null},"Path to non-existent page")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"query"),(0,r.yg)("td",{parentName:"tr",align:null},"Object"),(0,r.yg)("td",{parentName:"tr",align:null},"Open the query parameter of a non-existent page")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"isEntryPage"),(0,r.yg)("td",{parentName:"tr",align:null},"boolean"),(0,r.yg)("td",{parentName:"tr",align:null},"Whether it is the first page of this launch")))))}h.isMDXComponent=!0}}]);