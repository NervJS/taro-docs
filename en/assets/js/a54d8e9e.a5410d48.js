"use strict";(self.webpackChunktaro_docs=self.webpackChunktaro_docs||[]).push([[7346],{50440:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>y,frontMatter:()=>p,metadata:()=>i,toc:()=>d});a(37953);var n=a(58860);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const p={title:"UpdateManager",sidebar_label:"UpdateManager"},c=void 0,i={unversionedId:"apis/base/update/UpdateManager",id:"apis/base/update/UpdateManager",title:"UpdateManager",description:"The UpdateManager object, which is used to manage updates. Instances can be obtained via the Taro.getUpdateManager API.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/apis/base/update/UpdateManager.md",sourceDirName:"apis/base/update",slug:"/apis/base/update/UpdateManager",permalink:"/taro-docs/en/docs/apis/base/update/UpdateManager",draft:!1,editUrl:"https://github.com/nervjs/taro-docs/edit/master/docs/apis/base/update/UpdateManager.md",tags:[],version:"current",frontMatter:{title:"UpdateManager",sidebar_label:"UpdateManager"},sidebar:"API",previous:{title:"getUpdateManager",permalink:"/taro-docs/en/docs/apis/base/update/getUpdateManager"},next:{title:"getLaunchOptionsSync",permalink:"/taro-docs/en/docs/apis/base/weapp/life-cycle/getLaunchOptionsSync"}},u={},d=[{value:"Methods",id:"methods",level:2},{value:"applyUpdate",id:"applyupdate",level:3},{value:"onCheckForUpdate",id:"oncheckforupdate",level:3},{value:"onUpdateFailed",id:"onupdatefailed",level:3},{value:"onUpdateReady",id:"onupdateready",level:3},{value:"Parameter",id:"parameter",level:2},{value:"OnCheckForUpdateCallback",id:"oncheckforupdatecallback",level:3},{value:"OnCheckForUpdateResult",id:"oncheckforupdateresult",level:3}],s={toc:d},g="wrapper";function y(e){var{components:t}=e,a=o(e,["components"]);return(0,n.yg)(g,l(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){r(e,t,a[t])}))}return e}({},s,a),{components:t,mdxType:"MDXLayout"}),(0,n.yg)("p",null,"The UpdateManager object, which is used to manage updates. Instances can be obtained via the ",(0,n.yg)("inlineCode",{parentName:"p"},"Taro.getUpdateManager")," API."),(0,n.yg)("blockquote",null,(0,n.yg)("p",{parentName:"blockquote"},(0,n.yg)("a",{parentName:"p",href:"https://developers.weixin.qq.com/miniprogram/en/dev/api/base/update/UpdateManager.html"},"Reference"))),(0,n.yg)("h2",{id:"methods"},"Methods"),(0,n.yg)("h3",{id:"applyupdate"},"applyUpdate"),(0,n.yg)("p",null,"Forces a Mini Program to restart and update to the latest version. This API is called after the new Mini Program version is downloaded (i.e., when the ",(0,n.yg)("inlineCode",{parentName:"p"},"onUpdateReady")," callback is received)."),(0,n.yg)("blockquote",null,(0,n.yg)("p",{parentName:"blockquote"},(0,n.yg)("a",{parentName:"p",href:"https://developers.weixin.qq.com/miniprogram/en/dev/api/base/update/UpdateManager.applyUpdate.html"},"Reference"))),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-tsx"},"() => void\n")),(0,n.yg)("h3",{id:"oncheckforupdate"},"onCheckForUpdate"),(0,n.yg)("p",null,"Listens on the event that a request for checking for updates is sent to the WeChat backend. WeChat automatically checks for updates when the Mini program cold starts. The developer does not need to trigger this method."),(0,n.yg)("blockquote",null,(0,n.yg)("p",{parentName:"blockquote"},(0,n.yg)("a",{parentName:"p",href:"https://developers.weixin.qq.com/miniprogram/en/dev/api/base/update/UpdateManager.onCheckForUpdate.html"},"Reference"))),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-tsx"},"(callback: OnCheckForUpdateCallback) => void\n")),(0,n.yg)("table",null,(0,n.yg)("thead",null,(0,n.yg)("tr",null,(0,n.yg)("th",null,"Parameter"),(0,n.yg)("th",null,"Type"),(0,n.yg)("th",null,"Description"))),(0,n.yg)("tbody",null,(0,n.yg)("tr",null,(0,n.yg)("td",null,"callback"),(0,n.yg)("td",null,(0,n.yg)("code",null,"OnCheckForUpdateCallback")),(0,n.yg)("td",null,"The callback function for the event that a request for checking for updates is sent to the WeChat backend.")))),(0,n.yg)("h3",{id:"onupdatefailed"},"onUpdateFailed"),(0,n.yg)("p",null,"Listens on Mini Program update failure event. The app, instead of the developer, triggers the download when a newer version is available. A callback is performed when the download fails (probably due to network problems)."),(0,n.yg)("blockquote",null,(0,n.yg)("p",{parentName:"blockquote"},(0,n.yg)("a",{parentName:"p",href:"https://developers.weixin.qq.com/miniprogram/en/dev/api/base/update/UpdateManager.onUpdateFailed.html"},"Reference"))),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-tsx"},"(callback: (res: CallbackResult) => void) => void\n")),(0,n.yg)("table",null,(0,n.yg)("thead",null,(0,n.yg)("tr",null,(0,n.yg)("th",null,"Parameter"),(0,n.yg)("th",null,"Type"),(0,n.yg)("th",null,"Description"))),(0,n.yg)("tbody",null,(0,n.yg)("tr",null,(0,n.yg)("td",null,"callback"),(0,n.yg)("td",null,(0,n.yg)("code",null,"(res: CallbackResult) => void")),(0,n.yg)("td",null,"The callback function for Mini Program update failure event.")))),(0,n.yg)("h3",{id:"onupdateready"},"onUpdateReady"),(0,n.yg)("p",null,"Listens on the event that a newer Mini Program version is available. The app, instead of the developer, triggers the download. A callback is performed after successful download."),(0,n.yg)("blockquote",null,(0,n.yg)("p",{parentName:"blockquote"},(0,n.yg)("a",{parentName:"p",href:"https://developers.weixin.qq.com/miniprogram/en/dev/api/base/update/UpdateManager.onUpdateReady.html"},"Reference"))),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-tsx"},"(callback: (res: CallbackResult) => void) => void\n")),(0,n.yg)("table",null,(0,n.yg)("thead",null,(0,n.yg)("tr",null,(0,n.yg)("th",null,"Parameter"),(0,n.yg)("th",null,"Type"),(0,n.yg)("th",null,"Description"))),(0,n.yg)("tbody",null,(0,n.yg)("tr",null,(0,n.yg)("td",null,"callback"),(0,n.yg)("td",null,(0,n.yg)("code",null,"(res: CallbackResult) => void")),(0,n.yg)("td",null,"The callback function for the event that a newer Mini Program version is available.")))),(0,n.yg)("h2",{id:"parameter"},"Parameter"),(0,n.yg)("h3",{id:"oncheckforupdatecallback"},"OnCheckForUpdateCallback"),(0,n.yg)("p",null,"The callback function for the event that a request for checking for updates is sent to the WeChat backend."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-tsx"},"(result: OnCheckForUpdateResult) => void\n")),(0,n.yg)("table",null,(0,n.yg)("thead",null,(0,n.yg)("tr",null,(0,n.yg)("th",null,"Parameter"),(0,n.yg)("th",null,"Type"))),(0,n.yg)("tbody",null,(0,n.yg)("tr",null,(0,n.yg)("td",null,"result"),(0,n.yg)("td",null,(0,n.yg)("code",null,"OnCheckForUpdateResult"))))),(0,n.yg)("h3",{id:"oncheckforupdateresult"},"OnCheckForUpdateResult"),(0,n.yg)("table",null,(0,n.yg)("thead",null,(0,n.yg)("tr",null,(0,n.yg)("th",null,"Property"),(0,n.yg)("th",null,"Type"),(0,n.yg)("th",null,"Description"))),(0,n.yg)("tbody",null,(0,n.yg)("tr",null,(0,n.yg)("td",null,"hasUpdate"),(0,n.yg)("td",null,(0,n.yg)("code",null,"boolean")),(0,n.yg)("td",null,"Indicates whether a new version is available")))))}y.isMDXComponent=!0},58860:(e,t,a)=>{a.d(t,{xA:()=>u,yg:()=>y});var n=a(37953);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=n.createContext({}),i=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=i(e.components);return n.createElement(c.Provider,{value:t},e.children)},d="mdxType",s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,c=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),d=i(a),g=r,y=d["".concat(c,".").concat(g)]||d[g]||s[g]||l;return a?n.createElement(y,o(o({ref:t},u),{},{components:a})):n.createElement(y,o({ref:t},u))}));function y(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=g;var p={};for(var c in t)hasOwnProperty.call(t,c)&&(p[c]=t[c]);p.originalType=e,p[d]="string"==typeof e?e:r,o[1]=p;for(var i=2;i<l;i++)o[i]=a[i];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}g.displayName="MDXCreateElement"}}]);